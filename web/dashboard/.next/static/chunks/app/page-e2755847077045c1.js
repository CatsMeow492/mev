(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9798:function(e,t,s){Promise.resolve().then(s.bind(s,7553))},7553:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(7437),i=s(2265);let r=e=>{if(!e||"N/A"===e)return 0;let t=parseFloat(e.replace(/[^0-9.]/g,""));return e.includes("μs")?t/1e3:e.includes("ms")?t:t||0},l=()=>{var e,t;let[s,a]=(0,i.useState)({opportunities:[],metrics:null,systemStatus:null,alerts:[],isConnected:!1,error:null,executionMode:"simulation",executionStats:null}),l=(0,i.useRef)(null),c=(0,i.useRef)(null),[n,d]=(0,i.useState)(0),o=(0,i.useCallback)(()=>{try{l.current&&(l.current.close(),l.current=null);let e=new WebSocket("wss://mev-strategy-dev.fly.dev/ws");l.current=e;let t=null;e.onopen=()=>{a(e=>({...e,isConnected:!0,error:null})),d(0),e.send(JSON.stringify({type:"subscribe",channel:"all"})),t=setInterval(()=>{e.readyState===WebSocket.OPEN&&e.send(JSON.stringify({type:"ping"}))},25e3)},e.onclose=e=>{if(t&&(clearInterval(t),t=null),a(e=>({...e,isConnected:!1})),n<10){let e=Math.min(3e3*Math.pow(2,n),3e4);c.current=setTimeout(()=>{d(e=>e+1),o()},e)}else a(e=>({...e,error:"Max reconnection attempts reached"}))},e.onerror=e=>{console.error("\uD83D\uDEA8 WebSocket error:",e),a(e=>({...e,error:"WebSocket connection error"}))},e.addEventListener("pong",()=>{}),e.onmessage=e=>{try{let t=JSON.parse(e.data);switch(t.type){case"opportunity":let s={id:t.data.id,strategy:t.data.strategy,status:t.data.status,targetTx:t.data.targetTx,expectedProfit:t.data.expectedProfit,gasCost:t.data.gasCost,netProfit:t.data.netProfit,confidence:t.data.confidence,blockNumber:t.data.blockNumber,createdAt:t.data.timestamp||new Date().toISOString(),executionTxs:t.data.executionTxs||[],simulationLatency:r(t.data.simulationLatency||"N/A")};a(e=>({...e,opportunities:[s,...e.opportunities.slice(0,99)]}));break;case"metrics":let i={windowSize:1e3,totalTrades:t.data.opportunities_detected||0,profitableTrades:t.data.profitable_opportunities||0,lossRate:t.data.success_rate?1-t.data.success_rate:0,avgLatency:r(t.data.avg_latency||"N/A"),totalProfit:t.data.total_profit||"0.000000",lastUpdated:new Date().toISOString(),successRate:t.data.success_rate||0,avgProfitPerTrade:"0.00",executionMode:t.data.execution_mode||"simulation",totalExecutions:t.data.total_executions||0,successfulExecutions:t.data.successful_executions||0,failedExecutions:t.data.failed_executions||0,simulationSuccessRate:t.data.simulation_success_rate||0,liveSuccessRate:t.data.live_success_rate||0,totalExecutionProfit:t.data.total_execution_profit||"0.000000",totalExecutionGasCost:t.data.total_execution_gas_cost||"0.000000",netExecutionProfit:t.data.net_execution_profit||"0.000000",avgExecutionTime:t.data.avg_execution_time||0,avgSlippage:t.data.avg_slippage||0,emergencyStop:t.data.emergency_stop||!1,dailyVolumeUsed:t.data.daily_volume_used||"0.000000"};a(e=>({...e,metrics:i,executionMode:i.executionMode}));break;case"system_status":if(t.data.execution_mode&&t.data.latency)a(e=>{var s,a,i;return{...e,systemStatus:{...e.systemStatus,isConnected:!0,mempoolConnections:(null===(s=e.systemStatus)||void 0===s?void 0:s.mempoolConnections)||0,activeSimulations:"simulation"===t.data.execution_mode?1:0,queueSize:0,lastBlockNumber:(null===(a=e.systemStatus)||void 0===a?void 0:a.lastBlockNumber)||0,uptime:(null===(i=e.systemStatus)||void 0===i?void 0:i.uptime)||Math.floor(Date.now()/1e3),memoryUsage:0,cpuUsage:0,executionMode:t.data.execution_mode,currentLatency:t.data.latency}}});else{let e={isConnected:"connected"===t.data.blockchain,mempoolConnections:t.data.connected_peers||0,activeSimulations:0,queueSize:0,lastBlockNumber:t.data.last_block||0,uptime:Math.floor(Date.now()/1e3),memoryUsage:0,cpuUsage:0};a(t=>({...t,systemStatus:e}))}break;case"execution_update":let l=t.data;a(e=>({...e,opportunities:e.opportunities.map(e=>e.id===l.opportunity.id?{...e,...l.opportunity,executionMode:l.executionMode,executionResult:l.executionResult,simulationComparison:l.simulationComparison}:e),executionMode:l.executionMode}));break;case"alert":let c={id:t.data.id||"alert_".concat(Date.now()),type:t.data.type||"info",message:t.data.message||"",timestamp:t.data.timestamp||new Date().toISOString(),acknowledged:t.data.acknowledged||!1};a(e=>({...e,alerts:[c,...e.alerts.slice(0,49)]}))}}catch(e){console.error("❌ Failed to parse WebSocket message:",e)}}}catch(e){console.error("❌ Failed to create WebSocket connection:",e),a(e=>({...e,error:"Failed to establish connection"}))}},[n,10,3e3]),x=(0,i.useCallback)(()=>{l.current&&(l.current.close(),l.current=null),c.current&&(clearTimeout(c.current),c.current=null)},[]),m=(0,i.useCallback)(e=>{a(t=>({...t,alerts:t.alerts.map(t=>t.id===e?{...t,acknowledged:!0}:t)}))},[]),u=(0,i.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.current&&l.current.readyState===WebSocket.OPEN&&l.current.send(JSON.stringify({type:e,data:t}))},[]);return(0,i.useEffect)(()=>(o(),()=>{x()}),[o,x]),{...s,reconnectAttempts:n,connect:o,disconnect:x,acknowledgeAlert:m,sendMessage:u,executionMode:(null===(e=s.systemStatus)||void 0===e?void 0:e.executionMode)||"simulation",currentLatency:(null===(t=s.systemStatus)||void 0===t?void 0:t.currentLatency)||"N/A"}};var c=s(1014);let n=(e,t)=>{let s;let a=Math.floor((new Date().getTime()-e.getTime())/1e3),i=Math.floor(a/60),r=Math.floor(i/60),l=Math.floor(r/24);return s=a<60?1===a?"1 second":"".concat(a," seconds"):i<60?1===i?"1 minute":"".concat(i," minutes"):r<24?1===r?"1 hour":"".concat(r," hours"):1===l?"1 day":"".concat(l," days"),(null==t?void 0:t.addSuffix)?"".concat(s," ago"):s},d={sandwich:"Sandwich",backrun:"Backrun",frontrun:"Frontrun",arbitrage:"Arbitrage",time_bandit:"Time Bandit",cross_layer:"Cross Layer",liquidation:"Liquidation"},o={sandwich:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",backrun:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",frontrun:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",arbitrage:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",time_bandit:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",cross_layer:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",liquidation:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},x=e=>parseFloat(e).toFixed(6),m=e=>(1e9*parseFloat(e)).toFixed(2),u=e=>{let{opportunity:t,onClick:s}=e,i="profitable"===t.status,r=parseFloat(t.netProfit);return(0,a.jsxs)("div",{className:"card cursor-pointer transition-all duration-200 hover:scale-[1.02] ".concat(i?"profit-glow border-mev-primary":""),onClick:s,children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"status-pill ".concat(o[t.strategy]),children:d[t.strategy]}),(0,a.jsx)("span",{className:"status-".concat(t.status),children:t.status.toUpperCase()})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-lg font-bold ".concat(r>0?"text-mev-primary":"text-mev-danger"),children:[r>0?"+":"",r.toFixed(6)," ETH"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Confidence: ",(100*t.confidence).toFixed(1),"%"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Target Tx"}),(0,a.jsx)("div",{className:"font-mono text-sm truncate",children:t.targetTx})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Created"}),(0,a.jsx)("div",{className:"text-sm",children:n(new Date(t.createdAt),{addSuffix:!0})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500",children:"Expected Profit"}),(0,a.jsxs)("div",{className:"font-semibold text-mev-primary",children:[x(t.expectedProfit)," ETH"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500",children:"Gas Cost"}),(0,a.jsxs)("div",{className:"font-semibold text-mev-warning",children:[m(t.gasCost)," Gwei"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500",children:"Latency"}),(0,a.jsx)("div",{className:"font-semibold",children:t.simulationLatency?"".concat(t.simulationLatency,"ms"):"N/A"})]})]}),t.tokenAddresses&&t.tokenAddresses.length>0&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Tokens"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[t.tokenAddresses.slice(0,3).map((e,t)=>(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-xs font-mono",children:[e.slice(0,8),"...",e.slice(-6)]},t)),t.tokenAddresses.length>3&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-xs",children:["+",t.tokenAddresses.length-3," more"]})]})]})]})},g=e=>{let{opportunities:t,onOpportunityClick:s}=e,[r,l]=(0,i.useState)("all"),[c,n]=(0,i.useState)("all"),[d,o]=(0,i.useState)("createdAt"),[x,m]=(0,i.useState)("desc"),[g,h]=(0,i.useState)(!1),v=(0,i.useMemo)(()=>{let e=t;return"all"!==r&&(e=e.filter(e=>e.strategy===r)),"all"!==c&&(e=e.filter(e=>e.status===c)),g&&(e=e.filter(e=>parseFloat(e.netProfit)>0)),e.sort((e,t)=>{let s,a;switch(d){case"netProfit":s=parseFloat(e.netProfit),a=parseFloat(t.netProfit);break;case"confidence":s=e.confidence,a=t.confidence;break;default:s=new Date(e.createdAt).getTime(),a=new Date(t.createdAt).getTime()}return"desc"===x?a-s:s-a})},[t,r,c,g,d,x]),b=e=>{d===e?m("desc"===x?"asc":"desc"):(o(e),m("desc"))},p=t.filter(e=>parseFloat(e.netProfit)>0).length,y=t.reduce((e,t)=>e+parseFloat(t.netProfit),0);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-mev-primary",children:t.length}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Total Opportunities"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-mev-primary",children:p}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Profitable"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(y>0?"text-mev-primary":"text-mev-danger"),children:[y>0?"+":"",y.toFixed(6)," ETH"]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Total Value"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-mev-secondary",children:[t.length>0?(p/t.length*100).toFixed(1):0,"%"]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Success Rate"})]})]}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Strategy:"}),(0,a.jsxs)("select",{value:r,onChange:e=>l(e.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Strategies"}),(0,a.jsx)("option",{value:"sandwich",children:"Sandwich"}),(0,a.jsx)("option",{value:"backrun",children:"Backrun"}),(0,a.jsx)("option",{value:"frontrun",children:"Frontrun"}),(0,a.jsx)("option",{value:"arbitrage",children:"Arbitrage"}),(0,a.jsx)("option",{value:"time_bandit",children:"Time Bandit"}),(0,a.jsx)("option",{value:"cross_layer",children:"Cross Layer"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Status:"}),(0,a.jsxs)("select",{value:c,onChange:e=>n(e.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"simulated",children:"Simulated"}),(0,a.jsx)("option",{value:"detected",children:"Detected"}),(0,a.jsx)("option",{value:"validated",children:"Validated"}),(0,a.jsx)("option",{value:"profitable",children:"Profitable"}),(0,a.jsx)("option",{value:"unprofitable",children:"Unprofitable"}),(0,a.jsx)("option",{value:"executed",children:"Executed"}),(0,a.jsx)("option",{value:"failed",children:"Failed"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Sort by:"}),(0,a.jsxs)("button",{onClick:()=>b("createdAt"),className:"px-3 py-1 rounded text-sm ".concat("createdAt"===d?"bg-mev-primary text-white":"bg-gray-200 dark:bg-gray-700"),children:["Time ","createdAt"===d&&("desc"===x?"↓":"↑")]}),(0,a.jsxs)("button",{onClick:()=>b("netProfit"),className:"px-3 py-1 rounded text-sm ".concat("netProfit"===d?"bg-mev-primary text-white":"bg-gray-200 dark:bg-gray-700"),children:["Profit ","netProfit"===d&&("desc"===x?"↓":"↑")]}),(0,a.jsxs)("button",{onClick:()=>b("confidence"),className:"px-3 py-1 rounded text-sm ".concat("confidence"===d?"bg-mev-primary text-white":"bg-gray-200 dark:bg-gray-700"),children:["Confidence ","confidence"===d&&("desc"===x?"↓":"↑")]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"profitable-only",checked:g,onChange:e=>h(e.target.checked),className:"rounded"}),(0,a.jsx)("label",{htmlFor:"profitable-only",className:"text-sm font-medium",children:"Profitable Only"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 ml-auto",children:["Showing ",v.length," of ",t.length," opportunities"]})]})}),(0,a.jsx)("div",{className:"space-y-4",children:0===v.length?(0,a.jsxs)("div",{className:"card text-center text-gray-500 py-12",children:[(0,a.jsx)("div",{className:"text-lg mb-2",children:"No opportunities found"}),(0,a.jsx)("div",{className:"text-sm",children:0===t.length?"Waiting for MEV opportunities to be detected...":"Try adjusting your filters to see more results"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:v.map(e=>(0,a.jsx)(u,{opportunity:e,onClick:()=>null==s?void 0:s(e)},e.id))})})]})},h=e=>parseFloat(e).toFixed(6),v=e=>"".concat(e.toFixed(1),"ms"),b=e=>{let{metrics:t,isLoading:s}=e;if(s)return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(8)].map((e,t)=>(0,a.jsxs)("div",{className:"metric-card animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),(0,a.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded"})]},t))});if(!t)return(0,a.jsxs)("div",{className:"card text-center text-gray-500",children:[(0,a.jsx)("div",{className:"text-lg mb-2",children:"No metrics available"}),(0,a.jsx)("div",{className:"text-sm",children:"Waiting for system data..."})]});let i=t.profitableTrades/t.totalTrades*100||0,r=100*t.lossRate;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Total Trades"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:t.totalTrades.toLocaleString()}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["Window: ",t.windowSize]})]}),(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Success Rate"}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(i>60?"text-mev-primary":i>30?"text-mev-warning":"text-mev-danger"),children:[i.toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[t.profitableTrades," / ",t.totalTrades," profitable"]})]}),(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Loss Rate"}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(r<30?"text-mev-primary":r<70?"text-mev-warning":"text-mev-danger"),children:[r.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:r>=70?"CRITICAL":r>=50?"WARNING":"HEALTHY"})]}),(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Avg Latency"}),(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(t.avgLatency<100?"text-mev-primary":t.avgLatency<200?"text-mev-warning":"text-mev-danger"),children:v(t.avgLatency)}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Simulation time"})]}),(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Total Profit"}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(parseFloat(t.totalProfit)>0?"text-mev-primary":"text-mev-danger"),children:[parseFloat(t.totalProfit)>0?"+":"",h(t.totalProfit)," ETH"]}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Cumulative"})]}),(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Avg Profit/Trade"}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(parseFloat(t.avgProfitPerTrade)>0?"text-mev-primary":"text-mev-danger"),children:[parseFloat(t.avgProfitPerTrade)>0?"+":"",h(t.avgProfitPerTrade)," ETH"]}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Average per trade"})]}),(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Success Rate"}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(t.successRate>.6?"text-mev-primary":t.successRate>.3?"text-mev-warning":"text-mev-danger"),children:[(100*t.successRate).toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Execution success"})]}),(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Last Updated"}),(0,a.jsx)("div",{className:"text-lg font-bold",children:n(new Date(t.lastUpdated),{addSuffix:!0})}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Real-time data"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"card text-center ".concat(r>=70?"border-mev-danger bg-red-50 dark:bg-red-900/20":"border-mev-primary bg-green-50 dark:bg-green-900/20"),children:[(0,a.jsx)("div",{className:"text-lg font-semibold mb-2",children:"System Status"}),(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(r>=70?"text-mev-danger":"text-mev-primary"),children:r>=70?"DANGER":r>=50?"WARNING":"HEALTHY"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[r>=70&&"Automatic shutdown may trigger",r>=50&&r<70&&"Monitor closely",r<50&&"Operating normally"]})]}),(0,a.jsxs)("div",{className:"card text-center ".concat(t.avgLatency>200?"border-mev-danger bg-red-50 dark:bg-red-900/20":t.avgLatency>100?"border-mev-warning bg-yellow-50 dark:bg-yellow-900/20":"border-mev-primary bg-green-50 dark:bg-green-900/20"),children:[(0,a.jsx)("div",{className:"text-lg font-semibold mb-2",children:"Performance"}),(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(t.avgLatency>200?"text-mev-danger":t.avgLatency>100?"text-mev-warning":"text-mev-primary"),children:t.avgLatency>200?"SLOW":t.avgLatency>100?"DEGRADED":"OPTIMAL"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Target: <100ms average"})]}),(0,a.jsxs)("div",{className:"card text-center ".concat(0>parseFloat(t.totalProfit)?"border-mev-danger bg-red-50 dark:bg-red-900/20":"border-mev-primary bg-green-50 dark:bg-green-900/20"),children:[(0,a.jsx)("div",{className:"text-lg font-semibold mb-2",children:"Profitability"}),(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(0>parseFloat(t.totalProfit)?"text-mev-danger":"text-mev-primary"),children:0>parseFloat(t.totalProfit)?"LOSS":"PROFIT"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Net ",0>parseFloat(t.totalProfit)?"loss":"gain",": ",Math.abs(parseFloat(h(t.totalProfit)))," ETH"]})]})]})]})},p=e=>"".concat(Math.floor(e/3600),"h ").concat(Math.floor(e%3600/60),"m"),y=e=>"".concat((e/1048576).toFixed(1)," MB"),j=e=>{let{status:t,alerts:s,onAcknowledgeAlert:i,isConnected:r}=e,l=s.filter(e=>!e.acknowledged);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"card ".concat(r?"border-mev-primary bg-green-50 dark:bg-green-900/20":"border-mev-danger bg-red-50 dark:bg-red-900/20"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Connection Status"}),(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(r?"text-mev-primary":"text-mev-danger"),children:r?"CONNECTED":"DISCONNECTED"})]}),(0,a.jsx)("div",{className:"w-4 h-4 rounded-full ".concat(r?"bg-mev-primary animate-pulse":"bg-mev-danger")})]})}),t&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Mempool Connections"}),(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(t.mempoolConnections>0?"text-mev-primary":"text-mev-danger"),children:t.mempoolConnections}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Active connections"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Active Simulations"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-mev-secondary",children:t.activeSimulations}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Running simulations"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Queue Size"}),(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(t.queueSize>8e3?"text-mev-danger":t.queueSize>5e3?"text-mev-warning":"text-mev-primary"),children:t.queueSize.toLocaleString()}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Pending transactions"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Last Block"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:t.lastBlockNumber.toLocaleString()}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Latest block number"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Uptime"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-mev-primary",children:p(t.uptime)}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"System uptime"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Memory Usage"}),(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(t.memoryUsage>2e3?"text-mev-danger":t.memoryUsage>1e3?"text-mev-warning":"text-mev-primary"),children:y(t.memoryUsage)}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"RAM usage"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"CPU Usage"}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(t.cpuUsage>80?"text-mev-danger":t.cpuUsage>60?"text-mev-warning":"text-mev-primary"),children:[t.cpuUsage.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"CPU utilization"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"System Health"}),(0,a.jsx)("div",{className:"text-lg font-bold ".concat(t.queueSize<8e3&&t.memoryUsage<2e3&&t.cpuUsage<80?"text-mev-primary":t.queueSize<9e3&&t.memoryUsage<3e3&&t.cpuUsage<90?"text-mev-warning":"text-mev-danger"),children:t.queueSize<8e3&&t.memoryUsage<2e3&&t.cpuUsage<80?"HEALTHY":t.queueSize<9e3&&t.memoryUsage<3e3&&t.cpuUsage<90?"WARNING":"CRITICAL"}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Overall status"})]})]}),l.length>0&&(0,a.jsxs)("div",{className:"card border-mev-warning bg-yellow-50 dark:bg-yellow-900/20",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-mev-warning",children:"Active Alerts"}),(0,a.jsxs)("div",{className:"space-y-3",children:[l.slice(0,5).map(e=>(0,a.jsx)("div",{className:"p-3 rounded-lg border ".concat("error"===e.type?"border-red-300 bg-red-50 dark:bg-red-900/20":"warning"===e.type?"border-yellow-300 bg-yellow-50 dark:bg-yellow-900/20":"border-blue-300 bg-blue-50 dark:bg-blue-900/20"),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium ".concat("error"===e.type?"text-red-800 dark:text-red-200":"warning"===e.type?"text-yellow-800 dark:text-yellow-200":"text-blue-800 dark:text-blue-200"),children:e.type.toUpperCase()}),(0,a.jsx)("div",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:e.message}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:n(new Date(e.timestamp),{addSuffix:!0})})]}),i&&(0,a.jsx)("button",{onClick:()=>i(e.id),className:"ml-3 px-3 py-1 text-xs bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded transition-colors",children:"Acknowledge"})]})},e.id)),l.length>5&&(0,a.jsxs)("div",{className:"text-sm text-gray-600 text-center",children:["+",l.length-5," more alerts"]})]})]})]})},N=e=>{let{executionMode:t,metrics:s,onModeChange:i,className:r=""}=e,l=((e,t)=>{if(!t)return null;switch(e){case"simulation":let s=t.totalExecutions||0,a=t.simulationSuccessRate||0;return{nextMode:"hybrid",requirements:[{name:"Simulation Runs",current:s,required:100,met:s>=100},{name:"Success Rate",current:"".concat((100*a).toFixed(1),"%"),required:"85%",met:a>=.85}]};case"hybrid":let i=t.liveSuccessRate||0,r=t.successfulExecutions||0;return{nextMode:"live",requirements:[{name:"Live Executions",current:r,required:50,met:r>=50},{name:"Live Success Rate",current:"".concat((100*i).toFixed(1),"%"),required:"90%",met:i>=.9}]};case"live":return{nextMode:null,requirements:[]};default:return null}})(t,s),c=(null==l?void 0:l.requirements.every(e=>e.met))||!1;return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border p-6 ".concat(r),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full ".concat((e=>{switch(e){case"simulation":return"bg-blue-500";case"hybrid":return"bg-yellow-500";case"live":return"bg-red-500";default:return"bg-gray-500"}})(t)," animate-pulse")}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[(e=>{switch(e){case"simulation":return"\uD83D\uDCCB";case"hybrid":return"\uD83D\uDD04";case"live":return"\uD83D\uDE80";default:return"❓"}})(t)," ",t.toUpperCase()," MODE"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:(e=>{switch(e){case"simulation":return"Paper trading mode - No real transactions, risk-free testing";case"hybrid":return"Gradual transition - Simulate first, execute live if highly profitable";case"live":return"Live trading mode - Direct execution with real funds";default:return"Unknown execution mode"}})(t)})]})]}),(null==s?void 0:s.emergencyStop)&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-3 py-1 rounded-full text-sm font-medium",children:"\uD83D\uDEA8 EMERGENCY STOP"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(null==s?void 0:s.totalExecutions)||0}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Executions"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null==s?void 0:s.successfulExecutions)||0}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Successful"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null==s?void 0:s.netExecutionProfit)||"0.000"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Net Profit (ETH)"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(null==s?void 0:s.avgLatency)?"".concat(s.avgLatency.toFixed(1),"ms"):"N/A"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Latency"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[(null==s?void 0:s.avgExecutionTime)||0,"ms"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Execution Time"})]})]}),(null==s?void 0:s.dailyVolumeUsed)&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Daily Volume Used"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.dailyVolumeUsed," ETH"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(parseFloat(s.dailyVolumeUsed)/10*100,100),"%")}})})]}),l&&l.nextMode&&(0,a.jsxs)("div",{className:"border-t pt-6",children:[(0,a.jsxs)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:["\uD83C\uDFAF Progress to ",l.nextMode.toUpperCase()," Mode"]}),(0,a.jsx)("div",{className:"space-y-3",children:l.requirements.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.met?"bg-green-500":"bg-gray-300")}),(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.name})]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:e.met?"text-green-600":"text-gray-600",children:e.current}),(0,a.jsxs)("span",{className:"text-gray-500",children:[" / ",e.required]})]})]},t))}),c&&i&&(0,a.jsxs)("button",{onClick:()=>i(l.nextMode),className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:["\uD83D\uDE80 Advance to ",l.nextMode.toUpperCase()," Mode"]})]}),"live"===t&&i&&(0,a.jsx)("div",{className:"border-t pt-6",children:(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>i("hybrid"),className:"flex-1 bg-yellow-600 hover:bg-yellow-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"⬇️ Downgrade to Hybrid"}),(0,a.jsx)("button",{onClick:()=>i("simulation"),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"\uD83D\uDCCB Back to Simulation"})]})}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(null==s?void 0:s.simulationSuccessRate)!==void 0&&(0,a.jsxs)("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[(100*s.simulationSuccessRate).toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-sm text-blue-800 dark:text-blue-400",children:"Simulation Success Rate"})]}),(null==s?void 0:s.liveSuccessRate)!==void 0&&s.liveSuccessRate>0&&(0,a.jsxs)("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-green-600",children:[(100*s.liveSuccessRate).toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-sm text-green-800 dark:text-green-400",children:"Live Success Rate"})]})]})]})};function f(e){let{className:t=""}=e,[s,r]=(0,i.useState)([]),[l,c]=(0,i.useState)(null),[n,d]=(0,i.useState)([]),[o,x]=(0,i.useState)(null),[m,u]=(0,i.useState)(null),[g,h]=(0,i.useState)(!0),[v,b]=(0,i.useState)(null);(0,i.useEffect)(()=>{p();let e=setInterval(p,5e3);return()=>clearInterval(e)},[]);let p=async()=>{try{let[e,t,s]=await Promise.all([fetch("/api/liquidation?type=opportunities"),fetch("/api/liquidation?type=metrics"),fetch("/api/liquidation?type=protocols")]),[a,i,l]=await Promise.all([e.json(),t.json(),s.json()]);a.success&&r(a.data),i.success&&c(i.data),l.success&&d(l.data),h(!1),b(null)}catch(e){b(e instanceof Error?e.message:"Failed to fetch liquidation data"),h(!1)}},y=async e=>{try{let t=await fetch("/api/liquidation?type=validation&id=".concat(e.id)),s=await t.json();s.success&&(u(s.data),x(e))}catch(e){console.error("Validation failed:",e)}},j=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"simulation";try{let s=await fetch("/api/liquidation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({opportunityId:e.id,executionMode:t})}),a=await s.json();a.success&&(alert("Liquidation ".concat(t," successful! Net profit: ").concat(N(a.data.actualNetProfit))),p())}catch(e){alert("Execution failed: ".concat(e instanceof Error?e.message:"Unknown error"))}},N=e=>{let t=parseFloat(e)/1e18;return"$".concat(t.toFixed(2))},f=e=>"".concat(e.slice(0,6),"...").concat(e.slice(-4)),k=e=>e<1?"text-red-500":e<1.2?"text-yellow-500":"text-green-500",w=e=>e<.2?"text-green-500":e<.5?"text-yellow-500":e<.8?"text-orange-500":"text-red-500";return g?(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 ".concat(t),children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/4 mb-4"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-300 rounded"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 rounded w-5/6"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 rounded w-4/6"})]})]})}):v?(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 ".concat(t),children:(0,a.jsxs)("div",{className:"text-red-500",children:["Error: ",v]})}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md ".concat(t),children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 rounded-t-lg",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Liquidation Detection"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"opacity-80",children:"Total Opportunities"}),(0,a.jsx)("div",{className:"text-xl font-semibold",children:(null==l?void 0:l.totalOpportunities)||0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"opacity-80",children:"Avg Profit"}),(0,a.jsx)("div",{className:"text-xl font-semibold",children:l?N(l.averageProfit):"$0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"opacity-80",children:"Avg Health Factor"}),(0,a.jsx)("div",{className:"text-xl font-semibold",children:(null==l?void 0:l.averageHealthFactor.toFixed(3))||"0.000"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"opacity-80",children:"Active Protocols"}),(0,a.jsx)("div",{className:"text-xl font-semibold",children:n.filter(e=>e.isActive).length})]})]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Protocol Status"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:e.name}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})]}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:["Positions: ",e.totalPositions]}),(0,a.jsxs)("div",{children:["Liquidatable: ",(0,a.jsx)("span",{className:"font-semibold text-red-600",children:e.liquidatablePositions})]}),(0,a.jsxs)("div",{children:["Avg HF: ",(0,a.jsx)("span",{className:k(e.averageHealthFactor),children:e.averageHealthFactor.toFixed(2)})]}),(0,a.jsxs)("div",{children:["TVL: ",N(e.totalCollateralValue)]})]})]},t))})]}),l&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Risk Distribution"}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-500",children:l.riskDistribution.low}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Low Risk"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-500",children:l.riskDistribution.medium}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Medium Risk"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-500",children:l.riskDistribution.high}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"High Risk"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-500",children:l.riskDistribution.critical}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Critical Risk"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Active Opportunities"}),0===s.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No liquidation opportunities detected"}):(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:e.protocol.toUpperCase()}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:f(e.borrower)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold",children:[e.collateralToken,"/",e.debtToken]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["HF: ",(0,a.jsx)("span",{className:k(e.healthFactor),children:e.healthFactor.toFixed(3)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-green-600",children:N(e.netProfit)}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Net Profit"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold",children:["Risk: ",(0,a.jsxs)("span",{className:w(e.riskScore),children:[(100*e.riskScore).toFixed(0),"%"]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Confidence: ",(100*e.confidence).toFixed(0),"%"]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("profitable"===e.status?"bg-green-100 text-green-800":"validated"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.status})}),(0,a.jsxs)("div",{className:"space-x-2",children:[(0,a.jsx)("button",{onClick:()=>y(e),className:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:"Validate"}),(0,a.jsx)("button",{onClick:()=>j(e,"simulation"),className:"px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600",children:"Simulate"})]})]})},e.id))})]}),o&&m&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"Validation Results"}),(0,a.jsx)("button",{onClick:()=>{x(null),u(null)},className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Validation Score"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[(100*m.validationScore).toFixed(0),"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Confidence"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[(100*m.confidence).toFixed(0),"%"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Validation Checks"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center ".concat(m.profitabilityCheck?"text-green-600":"text-red-600"),children:[m.profitabilityCheck?"✓":"✗"," Profitability"]}),(0,a.jsxs)("div",{className:"flex items-center ".concat(m.healthFactorCheck?"text-green-600":"text-red-600"),children:[m.healthFactorCheck?"✓":"✗"," Health Factor"]}),(0,a.jsxs)("div",{className:"flex items-center ".concat(m.collateralValueCheck?"text-green-600":"text-red-600"),children:[m.collateralValueCheck?"✓":"✗"," Collateral Value"]}),(0,a.jsxs)("div",{className:"flex items-center ".concat(m.flashLoanAvailabilityCheck?"text-green-600":"text-red-600"),children:[m.flashLoanAvailabilityCheck?"✓":"✗"," Flash Loan Available"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Risk Assessment"}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Overall Risk: ",(0,a.jsx)("span",{className:w(m.riskAssessment.overallRisk),children:m.riskAssessment.riskLevel})]})}),(0,a.jsx)("div",{className:"space-y-2",children:m.riskAssessment.riskComponents.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:e.name.replace(/_/g," ")}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"text-sm font-semibold ".concat(w(e.score)),children:[(100*e.score).toFixed(0),"%"]}),(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",(100*e.weight).toFixed(0),"% weight)"]})]})]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Recommendations"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm",children:m.recommendations.map((e,t)=>(0,a.jsx)("li",{children:e},t))})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)("button",{onClick:()=>j(o,"simulation"),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Simulate Execution"}),(0,a.jsx)("button",{onClick:()=>j(o,"live"),className:"flex-1 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:"Execute Live"})]})]})]})})]})]})}function k(){let[e,t]=(0,i.useState)("opportunities"),[s,r]=(0,i.useState)(null),{opportunities:n,metrics:d,systemStatus:o,alerts:x,isConnected:m,error:u,reconnectAttempts:h,acknowledgeAlert:v,executionMode:p,sendMessage:y}=l(),{emergencyShutdown:k,restartSystem:w,loading:S,error:C}=(0,c.h)(),F=async()=>{if(window.confirm("Are you sure you want to trigger emergency shutdown?")){let e=prompt("Please provide a reason for the shutdown:");e&&await k(e)}},P=async()=>{window.confirm("Are you sure you want to restart the system?")&&await w()};return(0,a.jsxs)("div",{className:"min-h-screen bg-mev-darker",children:[(0,a.jsx)("header",{className:"bg-mev-dark border-b border-gray-700 sticky top-0 z-50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"MEV Engine Dashboard"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(m?"bg-mev-primary animate-pulse":"bg-mev-danger")}),(0,a.jsx)("span",{className:"text-sm ".concat(m?"text-mev-primary":"text-mev-danger"),children:m?"Connected":h>0?"Reconnecting... (".concat(h,")"):"Disconnected"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("nav",{className:"flex space-x-1",children:[(0,a.jsxs)("button",{onClick:()=>t("opportunities"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("opportunities"===e?"bg-mev-primary text-white":"text-gray-300 hover:text-white hover:bg-gray-700"),children:["Opportunities (",n.length,")"]}),(0,a.jsx)("button",{onClick:()=>t("metrics"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("metrics"===e?"bg-mev-primary text-white":"text-gray-300 hover:text-white hover:bg-gray-700"),children:"Metrics"}),(0,a.jsx)("button",{onClick:()=>t("execution"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("execution"===e?"bg-mev-primary text-white":"text-gray-300 hover:text-white hover:bg-gray-700"),children:"\uD83D\uDE80 Execution"}),(0,a.jsx)("button",{onClick:()=>t("liquidation"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("liquidation"===e?"bg-mev-primary text-white":"text-gray-300 hover:text-white hover:bg-gray-700"),children:"\uD83D\uDCA7 Liquidation"}),(0,a.jsxs)("button",{onClick:()=>t("system"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("system"===e?"bg-mev-primary text-white":"text-gray-300 hover:text-white hover:bg-gray-700"),children:["System ",x.filter(e=>!e.acknowledged).length>0&&(0,a.jsx)("span",{className:"ml-2 px-2 py-1 bg-mev-danger text-white text-xs rounded-full",children:x.filter(e=>!e.acknowledged).length})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:P,disabled:S||!m,className:"px-3 py-2 bg-mev-warning hover:bg-yellow-600 text-white text-sm rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Restart"}),(0,a.jsx)("button",{onClick:F,disabled:S,className:"px-3 py-2 bg-mev-danger hover:bg-red-600 text-white text-sm rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Emergency Stop"})]})]})]})})}),(u||C)&&(0,a.jsx)("div",{className:"bg-red-600 text-white px-6 py-3",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Error:"})," ",u||C]})})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-6 py-6",children:["opportunities"===e&&(0,a.jsx)(g,{opportunities:n,onOpportunityClick:e=>{r(e)}}),"metrics"===e&&(0,a.jsx)(b,{metrics:d,isLoading:!1}),"execution"===e&&(0,a.jsx)(N,{executionMode:p,metrics:d,onModeChange:e=>{y&&y("execution_mode_change",{mode:e})}}),"liquidation"===e&&(0,a.jsx)(f,{}),"system"===e&&(0,a.jsx)(j,{status:o,alerts:x,onAcknowledgeAlert:v,isConnected:m})]}),s&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-white dark:bg-mev-dark rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Opportunity Details"}),(0,a.jsx)("button",{onClick:()=>r(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"ID"}),(0,a.jsx)("div",{className:"mt-1 font-mono text-sm",children:s.id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Strategy"}),(0,a.jsx)("div",{className:"mt-1",children:s.strategy})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("span",{className:"status-".concat(s.status),children:s.status.toUpperCase()})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confidence"}),(0,a.jsxs)("div",{className:"mt-1",children:[(100*s.confidence).toFixed(1),"%"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Target Transaction"}),(0,a.jsx)("div",{className:"mt-1 font-mono text-sm break-all",children:s.targetTx})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Expected Profit"}),(0,a.jsxs)("div",{className:"mt-1 text-mev-primary font-semibold",children:[parseFloat(s.expectedProfit).toFixed(6)," ETH"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Gas Cost"}),(0,a.jsxs)("div",{className:"mt-1 text-mev-warning font-semibold",children:[(1e9*parseFloat(s.gasCost)).toFixed(2)," Gwei"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Net Profit"}),(0,a.jsxs)("div",{className:"mt-1 font-semibold ".concat(parseFloat(s.netProfit)>0?"text-mev-primary":"text-mev-danger"),children:[parseFloat(s.netProfit)>0?"+":"",parseFloat(s.netProfit).toFixed(6)," ETH"]})]})]}),s.executionTxs.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Execution Transactions (",s.executionTxs.length,")"]}),(0,a.jsx)("div",{className:"space-y-2",children:s.executionTxs.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,a.jsx)("div",{className:"font-mono text-sm break-all",children:e.hash}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Gas: ",(null===(s=e.gasLimit)||void 0===s?void 0:s.toLocaleString())||"N/A"," @ ",e.gasPrice?(parseFloat(e.gasPrice)/1e9).toFixed(2):"N/A"," Gwei"]})]},t)})})]})]})]})})})]})}},1014:function(e,t,s){"use strict";s.d(t,{h:function(){return r}});var a=s(2265);let i=s(3464).Z.create({baseURL:"https://mev-strategy-dev.fly.dev/api/v1",timeout:1e4}),r=()=>{let[e,t]=(0,a.useState)(!1),[s,r]=(0,a.useState)(null),l=(0,a.useCallback)(async e=>{t(!0),r(null);try{return await e()}catch(e){return r(e instanceof Error?e.message:"An error occurred"),console.error("API request failed:",e),null}finally{t(!1)}},[]),c=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;return l(async()=>{let a=new URLSearchParams;return a.append("limit",e.toString()),t&&a.append("strategy",t),s&&a.append("status",s),(await i.get("/opportunities?".concat(a.toString()))).data})},[l]),n=(0,a.useCallback)(async e=>l(async()=>(await i.get("/opportunities/".concat(e))).data),[l]),d=(0,a.useCallback)(async()=>l(async()=>(await i.get("/metrics")).data),[l]),o=(0,a.useCallback)(async()=>l(async()=>(await i.get("/status")).data),[l]),x=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"24h";return l(async()=>(await i.get("/historical?period=".concat(e))).data)},[l]);return{loading:e,error:s,getOpportunities:c,getOpportunity:n,getMetrics:d,getSystemStatus:o,getHistoricalData:x,emergencyShutdown:(0,a.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return await l(async()=>(await i.post("/shutdown",{reason:e,override:t})).data.success)||!1},[l]),restartSystem:(0,a.useCallback)(async()=>await l(async()=>(await i.post("/restart")).data.success)||!1,[l]),updateThresholds:(0,a.useCallback)(async e=>await l(async()=>(await i.post("/thresholds",e)).data.success)||!1,[l])}}}},function(e){e.O(0,[464,971,117,744],function(){return e(e.s=9798)}),_N_E=e.O()}]);