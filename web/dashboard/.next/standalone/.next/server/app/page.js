(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},59:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c}),s(5480),s(2029),s(5866);var a=s(3191),r=s(8716),i=s(7922),l=s.n(i),d=s(5231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);s.d(t,n);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5480)),"/Users/taylormohney/Documents/GitHub/MEVDemo/web/dashboard/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"/Users/taylormohney/Documents/GitHub/MEVDemo/web/dashboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/taylormohney/Documents/GitHub/MEVDemo/web/dashboard/src/app/page.tsx"],x="/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9114:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},595:()=>{},8406:(e,t,s)=>{Promise.resolve().then(s.bind(s,640))},640:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var a=s(326),r=s(7577);let i=e=>{if(!e||"N/A"===e)return 0;let t=parseFloat(e.replace(/[^0-9.]/g,""));return e.includes("μs")?t/1e3:e.includes("ms")?t:t||0},l=()=>{let[e,t]=(0,r.useState)({opportunities:[],metrics:null,systemStatus:null,alerts:[],isConnected:!1,error:null,executionMode:"simulation",executionStats:null}),s=(0,r.useRef)(null),a=(0,r.useRef)(null),[l,d]=(0,r.useState)(0),n=(0,r.useCallback)(()=>{try{s.current&&(s.current.close(),s.current=null);let e=new WebSocket("wss://mev-strategy-dev.fly.dev/ws");s.current=e;let r=null;e.onopen=()=>{t(e=>({...e,isConnected:!0,error:null})),d(0),e.send(JSON.stringify({type:"subscribe",channel:"all"})),r=setInterval(()=>{e.readyState===WebSocket.OPEN&&e.send(JSON.stringify({type:"ping"}))},25e3)},e.onclose=e=>{if(r&&(clearInterval(r),r=null),t(e=>({...e,isConnected:!1})),l<10){let e=Math.min(3e3*Math.pow(2,l),3e4);a.current=setTimeout(()=>{d(e=>e+1),n()},e)}else t(e=>({...e,error:"Max reconnection attempts reached"}))},e.onerror=e=>{console.error("\uD83D\uDEA8 WebSocket error:",e),t(e=>({...e,error:"WebSocket connection error"}))},e.addEventListener("pong",()=>{}),e.onmessage=e=>{try{let s=JSON.parse(e.data);switch(s.type){case"opportunity":let a={id:s.data.id,strategy:s.data.strategy,status:s.data.status,targetTx:s.data.targetTx,expectedProfit:s.data.expectedProfit,gasCost:s.data.gasCost,netProfit:s.data.netProfit,confidence:s.data.confidence,blockNumber:s.data.blockNumber,createdAt:s.data.timestamp||new Date().toISOString(),executionTxs:s.data.executionTxs||[],simulationLatency:i(s.data.simulationLatency||"N/A")};t(e=>({...e,opportunities:[a,...e.opportunities.slice(0,99)]}));break;case"metrics":let r={windowSize:1e3,totalTrades:s.data.opportunities_detected||0,profitableTrades:s.data.profitable_opportunities||0,lossRate:s.data.success_rate?1-s.data.success_rate:0,avgLatency:i(s.data.avg_latency||"N/A"),totalProfit:s.data.total_profit||"0.000000",lastUpdated:new Date().toISOString(),successRate:s.data.success_rate||0,avgProfitPerTrade:"0.00",executionMode:s.data.execution_mode||"simulation",totalExecutions:s.data.total_executions||0,successfulExecutions:s.data.successful_executions||0,failedExecutions:s.data.failed_executions||0,simulationSuccessRate:s.data.simulation_success_rate||0,liveSuccessRate:s.data.live_success_rate||0,totalExecutionProfit:s.data.total_execution_profit||"0.000000",totalExecutionGasCost:s.data.total_execution_gas_cost||"0.000000",netExecutionProfit:s.data.net_execution_profit||"0.000000",avgExecutionTime:s.data.avg_execution_time||0,avgSlippage:s.data.avg_slippage||0,emergencyStop:s.data.emergency_stop||!1,dailyVolumeUsed:s.data.daily_volume_used||"0.000000"};t(e=>({...e,metrics:r,executionMode:r.executionMode}));break;case"system_status":if(s.data.execution_mode&&s.data.latency)t(e=>({...e,systemStatus:{...e.systemStatus,isConnected:!0,mempoolConnections:e.systemStatus?.mempoolConnections||0,activeSimulations:"simulation"===s.data.execution_mode?1:0,queueSize:0,lastBlockNumber:e.systemStatus?.lastBlockNumber||0,uptime:e.systemStatus?.uptime||Math.floor(Date.now()/1e3),memoryUsage:0,cpuUsage:0,executionMode:s.data.execution_mode,currentLatency:s.data.latency}}));else{let e={isConnected:"connected"===s.data.blockchain,mempoolConnections:s.data.connected_peers||0,activeSimulations:0,queueSize:0,lastBlockNumber:s.data.last_block||0,uptime:Math.floor(Date.now()/1e3),memoryUsage:0,cpuUsage:0};t(t=>({...t,systemStatus:e}))}break;case"execution_update":let l=s.data;t(e=>({...e,opportunities:e.opportunities.map(e=>e.id===l.opportunity.id?{...e,...l.opportunity,executionMode:l.executionMode,executionResult:l.executionResult,simulationComparison:l.simulationComparison}:e),executionMode:l.executionMode}));break;case"alert":let d={id:s.data.id||`alert_${Date.now()}`,type:s.data.type||"info",message:s.data.message||"",timestamp:s.data.timestamp||new Date().toISOString(),acknowledged:s.data.acknowledged||!1};t(e=>({...e,alerts:[d,...e.alerts.slice(0,49)]}))}}catch(e){console.error("❌ Failed to parse WebSocket message:",e)}}}catch(e){console.error("❌ Failed to create WebSocket connection:",e),t(e=>({...e,error:"Failed to establish connection"}))}},[l,10,3e3]),c=(0,r.useCallback)(()=>{s.current&&(s.current.close(),s.current=null),a.current&&(clearTimeout(a.current),a.current=null)},[]),o=(0,r.useCallback)(e=>{t(t=>({...t,alerts:t.alerts.map(t=>t.id===e?{...t,acknowledged:!0}:t)}))},[]),x=(0,r.useCallback)((e,t={})=>{s.current&&s.current.readyState===WebSocket.OPEN&&s.current.send(JSON.stringify({type:e,data:t}))},[]);return(0,r.useEffect)(()=>(n(),()=>{c()}),[n,c]),{...e,reconnectAttempts:l,connect:n,disconnect:c,acknowledgeAlert:o,sendMessage:x,executionMode:e.systemStatus?.executionMode||"simulation",currentLatency:e.systemStatus?.currentLatency||"N/A"}};var d=s(6996);let n=(e,t)=>{let s;let a=Math.floor((new Date().getTime()-e.getTime())/1e3),r=Math.floor(a/60),i=Math.floor(r/60),l=Math.floor(i/24);return s=a<60?1===a?"1 second":`${a} seconds`:r<60?1===r?"1 minute":`${r} minutes`:i<24?1===i?"1 hour":`${i} hours`:1===l?"1 day":`${l} days`,t?.addSuffix?`${s} ago`:s},c={sandwich:"Sandwich",backrun:"Backrun",frontrun:"Frontrun",arbitrage:"Arbitrage",time_bandit:"Time Bandit",cross_layer:"Cross Layer",liquidation:"Liquidation"},o={sandwich:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",backrun:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",frontrun:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",arbitrage:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",time_bandit:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",cross_layer:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",liquidation:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},x=e=>parseFloat(e).toFixed(6),m=e=>(1e9*parseFloat(e)).toFixed(2),u=({opportunity:e,onClick:t})=>{let s="profitable"===e.status,r=parseFloat(e.netProfit);return(0,a.jsxs)("div",{className:`card cursor-pointer transition-all duration-200 hover:scale-[1.02] ${s?"profit-glow border-mev-primary":""}`,onClick:t,children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:`status-pill ${o[e.strategy]}`,children:c[e.strategy]}),a.jsx("span",{className:`status-${e.status}`,children:e.status.toUpperCase()})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:`text-lg font-bold ${r>0?"text-mev-primary":"text-mev-danger"}`,children:[r>0?"+":"",r.toFixed(6)," ETH"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Confidence: ",(100*e.confidence).toFixed(1),"%"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Target Tx"}),a.jsx("div",{className:"font-mono text-sm truncate",children:e.targetTx})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Created"}),a.jsx("div",{className:"text-sm",children:n(new Date(e.createdAt),{addSuffix:!0})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-gray-500",children:"Expected Profit"}),(0,a.jsxs)("div",{className:"font-semibold text-mev-primary",children:[x(e.expectedProfit)," ETH"]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-gray-500",children:"Gas Cost"}),(0,a.jsxs)("div",{className:"font-semibold text-mev-warning",children:[m(e.gasCost)," Gwei"]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-gray-500",children:"Latency"}),a.jsx("div",{className:"font-semibold",children:e.simulationLatency?`${e.simulationLatency}ms`:"N/A"})]})]}),e.tokenAddresses&&e.tokenAddresses.length>0&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Tokens"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.tokenAddresses.slice(0,3).map((e,t)=>(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-xs font-mono",children:[e.slice(0,8),"...",e.slice(-6)]},t)),e.tokenAddresses.length>3&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-xs",children:["+",e.tokenAddresses.length-3," more"]})]})]})]})},g=({opportunities:e,onOpportunityClick:t})=>{let[s,i]=(0,r.useState)("all"),[l,d]=(0,r.useState)("all"),[n,c]=(0,r.useState)("createdAt"),[o,x]=(0,r.useState)("desc"),[m,g]=(0,r.useState)(!1),h=(0,r.useMemo)(()=>{let t=e;return"all"!==s&&(t=t.filter(e=>e.strategy===s)),"all"!==l&&(t=t.filter(e=>e.status===l)),m&&(t=t.filter(e=>parseFloat(e.netProfit)>0)),t.sort((e,t)=>{let s,a;switch(n){case"netProfit":s=parseFloat(e.netProfit),a=parseFloat(t.netProfit);break;case"confidence":s=e.confidence,a=t.confidence;break;default:s=new Date(e.createdAt).getTime(),a=new Date(t.createdAt).getTime()}return"desc"===o?a-s:s-a})},[e,s,l,m,n,o]),v=e=>{n===e?x("desc"===o?"asc":"desc"):(c(e),x("desc"))},p=e.filter(e=>parseFloat(e.netProfit)>0).length,b=e.reduce((e,t)=>e+parseFloat(t.netProfit),0);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"card text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-mev-primary",children:e.length}),a.jsx("div",{className:"text-sm text-gray-500",children:"Total Opportunities"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-mev-primary",children:p}),a.jsx("div",{className:"text-sm text-gray-500",children:"Profitable"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsxs)("div",{className:`text-2xl font-bold ${b>0?"text-mev-primary":"text-mev-danger"}`,children:[b>0?"+":"",b.toFixed(6)," ETH"]}),a.jsx("div",{className:"text-sm text-gray-500",children:"Total Value"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-mev-secondary",children:[e.length>0?(p/e.length*100).toFixed(1):0,"%"]}),a.jsx("div",{className:"text-sm text-gray-500",children:"Success Rate"})]})]}),a.jsx("div",{className:"card",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Strategy:"}),(0,a.jsxs)("select",{value:s,onChange:e=>i(e.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-sm",children:[a.jsx("option",{value:"all",children:"All Strategies"}),a.jsx("option",{value:"sandwich",children:"Sandwich"}),a.jsx("option",{value:"backrun",children:"Backrun"}),a.jsx("option",{value:"frontrun",children:"Frontrun"}),a.jsx("option",{value:"arbitrage",children:"Arbitrage"}),a.jsx("option",{value:"time_bandit",children:"Time Bandit"}),a.jsx("option",{value:"cross_layer",children:"Cross Layer"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Status:"}),(0,a.jsxs)("select",{value:l,onChange:e=>d(e.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-sm",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"simulated",children:"Simulated"}),a.jsx("option",{value:"detected",children:"Detected"}),a.jsx("option",{value:"validated",children:"Validated"}),a.jsx("option",{value:"profitable",children:"Profitable"}),a.jsx("option",{value:"unprofitable",children:"Unprofitable"}),a.jsx("option",{value:"executed",children:"Executed"}),a.jsx("option",{value:"failed",children:"Failed"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Sort by:"}),(0,a.jsxs)("button",{onClick:()=>v("createdAt"),className:`px-3 py-1 rounded text-sm ${"createdAt"===n?"bg-mev-primary text-white":"bg-gray-200 dark:bg-gray-700"}`,children:["Time ","createdAt"===n&&("desc"===o?"↓":"↑")]}),(0,a.jsxs)("button",{onClick:()=>v("netProfit"),className:`px-3 py-1 rounded text-sm ${"netProfit"===n?"bg-mev-primary text-white":"bg-gray-200 dark:bg-gray-700"}`,children:["Profit ","netProfit"===n&&("desc"===o?"↓":"↑")]}),(0,a.jsxs)("button",{onClick:()=>v("confidence"),className:`px-3 py-1 rounded text-sm ${"confidence"===n?"bg-mev-primary text-white":"bg-gray-200 dark:bg-gray-700"}`,children:["Confidence ","confidence"===n&&("desc"===o?"↓":"↑")]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"profitable-only",checked:m,onChange:e=>g(e.target.checked),className:"rounded"}),a.jsx("label",{htmlFor:"profitable-only",className:"text-sm font-medium",children:"Profitable Only"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 ml-auto",children:["Showing ",h.length," of ",e.length," opportunities"]})]})}),a.jsx("div",{className:"space-y-4",children:0===h.length?(0,a.jsxs)("div",{className:"card text-center text-gray-500 py-12",children:[a.jsx("div",{className:"text-lg mb-2",children:"No opportunities found"}),a.jsx("div",{className:"text-sm",children:0===e.length?"Waiting for MEV opportunities to be detected...":"Try adjusting your filters to see more results"})]}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:h.map(e=>a.jsx(u,{opportunity:e,onClick:()=>t?.(e)},e.id))})})]})},h=e=>parseFloat(e).toFixed(6),v=e=>`${e.toFixed(1)}ms`,p=({metrics:e,isLoading:t})=>{if(t)return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(8)].map((e,t)=>(0,a.jsxs)("div",{className:"metric-card animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded"})]},t))});if(!e)return(0,a.jsxs)("div",{className:"card text-center text-gray-500",children:[a.jsx("div",{className:"text-lg mb-2",children:"No metrics available"}),a.jsx("div",{className:"text-sm",children:"Waiting for system data..."})]});let s=e.profitableTrades/e.totalTrades*100||0,r=100*e.lossRate;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"metric-card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Trades"}),a.jsx("div",{className:"text-2xl font-bold",children:e.totalTrades.toLocaleString()}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["Window: ",e.windowSize]})]}),(0,a.jsxs)("div",{className:"metric-card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Success Rate"}),(0,a.jsxs)("div",{className:`text-2xl font-bold ${s>60?"text-mev-primary":s>30?"text-mev-warning":"text-mev-danger"}`,children:[s.toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[e.profitableTrades," / ",e.totalTrades," profitable"]})]}),(0,a.jsxs)("div",{className:"metric-card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Loss Rate"}),(0,a.jsxs)("div",{className:`text-2xl font-bold ${r<30?"text-mev-primary":r<70?"text-mev-warning":"text-mev-danger"}`,children:[r.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-400",children:r>=70?"CRITICAL":r>=50?"WARNING":"HEALTHY"})]}),(0,a.jsxs)("div",{className:"metric-card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Avg Latency"}),a.jsx("div",{className:`text-2xl font-bold ${e.avgLatency<100?"text-mev-primary":e.avgLatency<200?"text-mev-warning":"text-mev-danger"}`,children:v(e.avgLatency)}),a.jsx("div",{className:"text-xs text-gray-400",children:"Simulation time"})]}),(0,a.jsxs)("div",{className:"metric-card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Profit"}),(0,a.jsxs)("div",{className:`text-2xl font-bold ${parseFloat(e.totalProfit)>0?"text-mev-primary":"text-mev-danger"}`,children:[parseFloat(e.totalProfit)>0?"+":"",h(e.totalProfit)," ETH"]}),a.jsx("div",{className:"text-xs text-gray-400",children:"Cumulative"})]}),(0,a.jsxs)("div",{className:"metric-card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Avg Profit/Trade"}),(0,a.jsxs)("div",{className:`text-2xl font-bold ${parseFloat(e.avgProfitPerTrade)>0?"text-mev-primary":"text-mev-danger"}`,children:[parseFloat(e.avgProfitPerTrade)>0?"+":"",h(e.avgProfitPerTrade)," ETH"]}),a.jsx("div",{className:"text-xs text-gray-400",children:"Average per trade"})]}),(0,a.jsxs)("div",{className:"metric-card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Success Rate"}),(0,a.jsxs)("div",{className:`text-2xl font-bold ${e.successRate>.6?"text-mev-primary":e.successRate>.3?"text-mev-warning":"text-mev-danger"}`,children:[(100*e.successRate).toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-400",children:"Execution success"})]}),(0,a.jsxs)("div",{className:"metric-card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Last Updated"}),a.jsx("div",{className:"text-lg font-bold",children:n(new Date(e.lastUpdated),{addSuffix:!0})}),a.jsx("div",{className:"text-xs text-gray-400",children:"Real-time data"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:`card text-center ${r>=70?"border-mev-danger bg-red-50 dark:bg-red-900/20":"border-mev-primary bg-green-50 dark:bg-green-900/20"}`,children:[a.jsx("div",{className:"text-lg font-semibold mb-2",children:"System Status"}),a.jsx("div",{className:`text-2xl font-bold ${r>=70?"text-mev-danger":"text-mev-primary"}`,children:r>=70?"DANGER":r>=50?"WARNING":"HEALTHY"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[r>=70&&"Automatic shutdown may trigger",r>=50&&r<70&&"Monitor closely",r<50&&"Operating normally"]})]}),(0,a.jsxs)("div",{className:`card text-center ${e.avgLatency>200?"border-mev-danger bg-red-50 dark:bg-red-900/20":e.avgLatency>100?"border-mev-warning bg-yellow-50 dark:bg-yellow-900/20":"border-mev-primary bg-green-50 dark:bg-green-900/20"}`,children:[a.jsx("div",{className:"text-lg font-semibold mb-2",children:"Performance"}),a.jsx("div",{className:`text-2xl font-bold ${e.avgLatency>200?"text-mev-danger":e.avgLatency>100?"text-mev-warning":"text-mev-primary"}`,children:e.avgLatency>200?"SLOW":e.avgLatency>100?"DEGRADED":"OPTIMAL"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Target: <100ms average"})]}),(0,a.jsxs)("div",{className:`card text-center ${0>parseFloat(e.totalProfit)?"border-mev-danger bg-red-50 dark:bg-red-900/20":"border-mev-primary bg-green-50 dark:bg-green-900/20"}`,children:[a.jsx("div",{className:"text-lg font-semibold mb-2",children:"Profitability"}),a.jsx("div",{className:`text-2xl font-bold ${0>parseFloat(e.totalProfit)?"text-mev-danger":"text-mev-primary"}`,children:0>parseFloat(e.totalProfit)?"LOSS":"PROFIT"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Net ",0>parseFloat(e.totalProfit)?"loss":"gain",": ",Math.abs(parseFloat(h(e.totalProfit)))," ETH"]})]})]})]})},b=e=>`${Math.floor(e/3600)}h ${Math.floor(e%3600/60)}m`,y=e=>`${(e/1048576).toFixed(1)} MB`,j=({status:e,alerts:t,onAcknowledgeAlert:s,isConnected:r})=>{let i=t.filter(e=>!e.acknowledged);return(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:`card ${r?"border-mev-primary bg-green-50 dark:bg-green-900/20":"border-mev-danger bg-red-50 dark:bg-red-900/20"}`,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Connection Status"}),a.jsx("div",{className:`text-2xl font-bold ${r?"text-mev-primary":"text-mev-danger"}`,children:r?"CONNECTED":"DISCONNECTED"})]}),a.jsx("div",{className:`w-4 h-4 rounded-full ${r?"bg-mev-primary animate-pulse":"bg-mev-danger"}`})]})}),e&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Mempool Connections"}),a.jsx("div",{className:`text-2xl font-bold ${e.mempoolConnections>0?"text-mev-primary":"text-mev-danger"}`,children:e.mempoolConnections}),a.jsx("div",{className:"text-xs text-gray-400",children:"Active connections"})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Active Simulations"}),a.jsx("div",{className:"text-2xl font-bold text-mev-secondary",children:e.activeSimulations}),a.jsx("div",{className:"text-xs text-gray-400",children:"Running simulations"})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Queue Size"}),a.jsx("div",{className:`text-2xl font-bold ${e.queueSize>8e3?"text-mev-danger":e.queueSize>5e3?"text-mev-warning":"text-mev-primary"}`,children:e.queueSize.toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-400",children:"Pending transactions"})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Last Block"}),a.jsx("div",{className:"text-2xl font-bold",children:e.lastBlockNumber.toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-400",children:"Latest block number"})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Uptime"}),a.jsx("div",{className:"text-2xl font-bold text-mev-primary",children:b(e.uptime)}),a.jsx("div",{className:"text-xs text-gray-400",children:"System uptime"})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Memory Usage"}),a.jsx("div",{className:`text-2xl font-bold ${e.memoryUsage>2e3?"text-mev-danger":e.memoryUsage>1e3?"text-mev-warning":"text-mev-primary"}`,children:y(e.memoryUsage)}),a.jsx("div",{className:"text-xs text-gray-400",children:"RAM usage"})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"CPU Usage"}),(0,a.jsxs)("div",{className:`text-2xl font-bold ${e.cpuUsage>80?"text-mev-danger":e.cpuUsage>60?"text-mev-warning":"text-mev-primary"}`,children:[e.cpuUsage.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-400",children:"CPU utilization"})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"System Health"}),a.jsx("div",{className:`text-lg font-bold ${e.queueSize<8e3&&e.memoryUsage<2e3&&e.cpuUsage<80?"text-mev-primary":e.queueSize<9e3&&e.memoryUsage<3e3&&e.cpuUsage<90?"text-mev-warning":"text-mev-danger"}`,children:e.queueSize<8e3&&e.memoryUsage<2e3&&e.cpuUsage<80?"HEALTHY":e.queueSize<9e3&&e.memoryUsage<3e3&&e.cpuUsage<90?"WARNING":"CRITICAL"}),a.jsx("div",{className:"text-xs text-gray-400",children:"Overall status"})]})]}),i.length>0&&(0,a.jsxs)("div",{className:"card border-mev-warning bg-yellow-50 dark:bg-yellow-900/20",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-mev-warning",children:"Active Alerts"}),(0,a.jsxs)("div",{className:"space-y-3",children:[i.slice(0,5).map(e=>a.jsx("div",{className:`p-3 rounded-lg border ${"error"===e.type?"border-red-300 bg-red-50 dark:bg-red-900/20":"warning"===e.type?"border-yellow-300 bg-yellow-50 dark:bg-yellow-900/20":"border-blue-300 bg-blue-50 dark:bg-blue-900/20"}`,children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:`text-sm font-medium ${"error"===e.type?"text-red-800 dark:text-red-200":"warning"===e.type?"text-yellow-800 dark:text-yellow-200":"text-blue-800 dark:text-blue-200"}`,children:e.type.toUpperCase()}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:e.message}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:n(new Date(e.timestamp),{addSuffix:!0})})]}),s&&a.jsx("button",{onClick:()=>s(e.id),className:"ml-3 px-3 py-1 text-xs bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded transition-colors",children:"Acknowledge"})]})},e.id)),i.length>5&&(0,a.jsxs)("div",{className:"text-sm text-gray-600 text-center",children:["+",i.length-5," more alerts"]})]})]})]})},N=({executionMode:e,metrics:t,onModeChange:s,className:r=""})=>{let i=((e,t)=>{if(!t)return null;switch(e){case"simulation":let s=t.totalExecutions||0,a=t.simulationSuccessRate||0;return{nextMode:"hybrid",requirements:[{name:"Simulation Runs",current:s,required:100,met:s>=100},{name:"Success Rate",current:`${(100*a).toFixed(1)}%`,required:"85%",met:a>=.85}]};case"hybrid":let r=t.liveSuccessRate||0,i=t.successfulExecutions||0;return{nextMode:"live",requirements:[{name:"Live Executions",current:i,required:50,met:i>=50},{name:"Live Success Rate",current:`${(100*r).toFixed(1)}%`,required:"90%",met:r>=.9}]};case"live":return{nextMode:null,requirements:[]};default:return null}})(e,t),l=i?.requirements.every(e=>e.met)||!1;return(0,a.jsxs)("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-lg border p-6 ${r}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`w-4 h-4 rounded-full ${(e=>{switch(e){case"simulation":return"bg-blue-500";case"hybrid":return"bg-yellow-500";case"live":return"bg-red-500";default:return"bg-gray-500"}})(e)} animate-pulse`}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[(e=>{switch(e){case"simulation":return"\uD83D\uDCCB";case"hybrid":return"\uD83D\uDD04";case"live":return"\uD83D\uDE80";default:return"❓"}})(e)," ",e.toUpperCase()," MODE"]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:(e=>{switch(e){case"simulation":return"Paper trading mode - No real transactions, risk-free testing";case"hybrid":return"Gradual transition - Simulate first, execute live if highly profitable";case"live":return"Live trading mode - Direct execution with real funds";default:return"Unknown execution mode"}})(e)})]})]}),t?.emergencyStop&&a.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-3 py-1 rounded-full text-sm font-medium",children:"\uD83D\uDEA8 EMERGENCY STOP"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?.totalExecutions||0}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Executions"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:t?.successfulExecutions||0}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Successful"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t?.netExecutionProfit||"0.000"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Net Profit (ETH)"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t?.avgLatency?`${t.avgLatency.toFixed(1)}ms`:"N/A"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Latency"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[t?.avgExecutionTime||0,"ms"]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Execution Time"})]})]}),t?.dailyVolumeUsed&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Daily Volume Used"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.dailyVolumeUsed," ETH"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(parseFloat(t.dailyVolumeUsed)/10*100,100)}%`}})})]}),i&&i.nextMode&&(0,a.jsxs)("div",{className:"border-t pt-6",children:[(0,a.jsxs)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:["\uD83C\uDFAF Progress to ",i.nextMode.toUpperCase()," Mode"]}),a.jsx("div",{className:"space-y-3",children:i.requirements.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${e.met?"bg-green-500":"bg-gray-300"}`}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.name})]}),(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("span",{className:e.met?"text-green-600":"text-gray-600",children:e.current}),(0,a.jsxs)("span",{className:"text-gray-500",children:[" / ",e.required]})]})]},t))}),l&&s&&(0,a.jsxs)("button",{onClick:()=>s(i.nextMode),className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:["\uD83D\uDE80 Advance to ",i.nextMode.toUpperCase()," Mode"]})]}),"live"===e&&s&&a.jsx("div",{className:"border-t pt-6",children:(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>s("hybrid"),className:"flex-1 bg-yellow-600 hover:bg-yellow-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"⬇️ Downgrade to Hybrid"}),a.jsx("button",{onClick:()=>s("simulation"),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"\uD83D\uDCCB Back to Simulation"})]})}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[t?.simulationSuccessRate!==void 0&&(0,a.jsxs)("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[(100*t.simulationSuccessRate).toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-400",children:"Simulation Success Rate"})]}),t?.liveSuccessRate!==void 0&&t.liveSuccessRate>0&&(0,a.jsxs)("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-green-600",children:[(100*t.liveSuccessRate).toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-green-800 dark:text-green-400",children:"Live Success Rate"})]})]})]})};function f({className:e=""}){let[t,s]=(0,r.useState)([]),[i,l]=(0,r.useState)(null),[d,n]=(0,r.useState)([]),[c,o]=(0,r.useState)(null),[x,m]=(0,r.useState)(null),[u,g]=(0,r.useState)(!0),[h,v]=(0,r.useState)(null),p=async()=>{try{let[e,t,a]=await Promise.all([fetch("/api/liquidation?type=opportunities"),fetch("/api/liquidation?type=metrics"),fetch("/api/liquidation?type=protocols")]),[r,i,d]=await Promise.all([e.json(),t.json(),a.json()]);r.success&&s(r.data),i.success&&l(i.data),d.success&&n(d.data),g(!1),v(null)}catch(e){v(e instanceof Error?e.message:"Failed to fetch liquidation data"),g(!1)}},b=async e=>{try{let t=await fetch(`/api/liquidation?type=validation&id=${e.id}`),s=await t.json();s.success&&(m(s.data),o(e))}catch(e){console.error("Validation failed:",e)}},y=async(e,t="simulation")=>{try{let s=await fetch("/api/liquidation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({opportunityId:e.id,executionMode:t})}),a=await s.json();a.success&&(alert(`Liquidation ${t} successful! Net profit: ${j(a.data.actualNetProfit)}`),p())}catch(e){alert(`Execution failed: ${e instanceof Error?e.message:"Unknown error"}`)}},j=e=>{let t=parseFloat(e)/1e18;return`$${t.toFixed(2)}`},N=e=>`${e.slice(0,6)}...${e.slice(-4)}`,f=e=>e<1?"text-red-500":e<1.2?"text-yellow-500":"text-green-500",k=e=>e<.2?"text-green-500":e<.5?"text-yellow-500":e<.8?"text-orange-500":"text-red-500";return u?a.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 ${e}`,children:(0,a.jsxs)("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/4 mb-4"}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-4 bg-gray-300 rounded"}),a.jsx("div",{className:"h-4 bg-gray-300 rounded w-5/6"}),a.jsx("div",{className:"h-4 bg-gray-300 rounded w-4/6"})]})]})}):h?a.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 ${e}`,children:(0,a.jsxs)("div",{className:"text-red-500",children:["Error: ",h]})}):(0,a.jsxs)("div",{className:`bg-white rounded-lg shadow-md ${e}`,children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 rounded-t-lg",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Liquidation Detection"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"opacity-80",children:"Total Opportunities"}),a.jsx("div",{className:"text-xl font-semibold",children:i?.totalOpportunities||0})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"opacity-80",children:"Avg Profit"}),a.jsx("div",{className:"text-xl font-semibold",children:i?j(i.averageProfit):"$0"})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"opacity-80",children:"Avg Health Factor"}),a.jsx("div",{className:"text-xl font-semibold",children:i?.averageHealthFactor.toFixed(3)||"0.000"})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"opacity-80",children:"Active Protocols"}),a.jsx("div",{className:"text-xl font-semibold",children:d.filter(e=>e.isActive).length})]})]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Protocol Status"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:d.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold",children:e.name}),a.jsx("span",{className:`px-2 py-1 rounded text-xs ${e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.isActive?"Active":"Inactive"})]}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:["Positions: ",e.totalPositions]}),(0,a.jsxs)("div",{children:["Liquidatable: ",a.jsx("span",{className:"font-semibold text-red-600",children:e.liquidatablePositions})]}),(0,a.jsxs)("div",{children:["Avg HF: ",a.jsx("span",{className:f(e.averageHealthFactor),children:e.averageHealthFactor.toFixed(2)})]}),(0,a.jsxs)("div",{children:["TVL: ",j(e.totalCollateralValue)]})]})]},t))})]}),i&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Risk Distribution"}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-500",children:i.riskDistribution.low}),a.jsx("div",{className:"text-sm text-gray-600",children:"Low Risk"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:i.riskDistribution.medium}),a.jsx("div",{className:"text-sm text-gray-600",children:"Medium Risk"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-500",children:i.riskDistribution.high}),a.jsx("div",{className:"text-sm text-gray-600",children:"High Risk"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-500",children:i.riskDistribution.critical}),a.jsx("div",{className:"text-sm text-gray-600",children:"Critical Risk"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Active Opportunities"}),0===t.length?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No liquidation opportunities detected"}):a.jsx("div",{className:"space-y-4",children:t.map(e=>a.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-semibold",children:e.protocol.toUpperCase()}),a.jsx("div",{className:"text-sm text-gray-600",children:N(e.borrower)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold",children:[e.collateralToken,"/",e.debtToken]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["HF: ",a.jsx("span",{className:f(e.healthFactor),children:e.healthFactor.toFixed(3)})]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-semibold text-green-600",children:j(e.netProfit)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Net Profit"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold",children:["Risk: ",(0,a.jsxs)("span",{className:k(e.riskScore),children:[(100*e.riskScore).toFixed(0),"%"]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Confidence: ",(100*e.confidence).toFixed(0),"%"]})]}),a.jsx("div",{children:a.jsx("span",{className:`px-2 py-1 rounded text-xs ${"profitable"===e.status?"bg-green-100 text-green-800":"validated"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:e.status})}),(0,a.jsxs)("div",{className:"space-x-2",children:[a.jsx("button",{onClick:()=>b(e),className:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:"Validate"}),a.jsx("button",{onClick:()=>y(e,"simulation"),className:"px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600",children:"Simulate"})]})]})},e.id))})]}),c&&x&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-semibold",children:"Validation Results"}),a.jsx("button",{onClick:()=>{o(null),m(null)},className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Validation Score"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[(100*x.validationScore).toFixed(0),"%"]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Confidence"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[(100*x.confidence).toFixed(0),"%"]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Validation Checks"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:`flex items-center ${x.profitabilityCheck?"text-green-600":"text-red-600"}`,children:[x.profitabilityCheck?"✓":"✗"," Profitability"]}),(0,a.jsxs)("div",{className:`flex items-center ${x.healthFactorCheck?"text-green-600":"text-red-600"}`,children:[x.healthFactorCheck?"✓":"✗"," Health Factor"]}),(0,a.jsxs)("div",{className:`flex items-center ${x.collateralValueCheck?"text-green-600":"text-red-600"}`,children:[x.collateralValueCheck?"✓":"✗"," Collateral Value"]}),(0,a.jsxs)("div",{className:`flex items-center ${x.flashLoanAvailabilityCheck?"text-green-600":"text-red-600"}`,children:[x.flashLoanAvailabilityCheck?"✓":"✗"," Flash Loan Available"]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Risk Assessment"}),a.jsx("div",{className:"mb-2",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Overall Risk: ",a.jsx("span",{className:k(x.riskAssessment.overallRisk),children:x.riskAssessment.riskLevel})]})}),a.jsx("div",{className:"space-y-2",children:x.riskAssessment.riskComponents.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:e.name.replace(/_/g," ")}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:`text-sm font-semibold ${k(e.score)}`,children:[(100*e.score).toFixed(0),"%"]}),(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",(100*e.weight).toFixed(0),"% weight)"]})]})]},t))})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Recommendations"}),a.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm",children:x.recommendations.map((e,t)=>a.jsx("li",{children:e},t))})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{onClick:()=>y(c,"simulation"),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Simulate Execution"}),a.jsx("button",{onClick:()=>y(c,"live"),className:"flex-1 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:"Execute Live"})]})]})]})})]})]})}function k(){let[e,t]=(0,r.useState)("opportunities"),[s,i]=(0,r.useState)(null),{opportunities:n,metrics:c,systemStatus:o,alerts:x,isConnected:m,error:u,reconnectAttempts:h,acknowledgeAlert:v,executionMode:b,sendMessage:y}=l(),{emergencyShutdown:k,restartSystem:w,loading:S,error:C}=(0,d.h)(),P=async()=>{if(window.confirm("Are you sure you want to trigger emergency shutdown?")){let e=prompt("Please provide a reason for the shutdown:");e&&await k(e)}},F=async()=>{window.confirm("Are you sure you want to restart the system?")&&await w()};return(0,a.jsxs)("div",{className:"min-h-screen bg-mev-darker",children:[a.jsx("header",{className:"bg-mev-dark border-b border-gray-700 sticky top-0 z-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"MEV Engine Dashboard"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${m?"bg-mev-primary animate-pulse":"bg-mev-danger"}`}),a.jsx("span",{className:`text-sm ${m?"text-mev-primary":"text-mev-danger"}`,children:m?"Connected":h>0?`Reconnecting... (${h})`:"Disconnected"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("nav",{className:"flex space-x-1",children:[(0,a.jsxs)("button",{onClick:()=>t("opportunities"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${"opportunities"===e?"bg-mev-primary text-white":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:["Opportunities (",n.length,")"]}),a.jsx("button",{onClick:()=>t("metrics"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${"metrics"===e?"bg-mev-primary text-white":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:"Metrics"}),a.jsx("button",{onClick:()=>t("execution"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${"execution"===e?"bg-mev-primary text-white":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:"\uD83D\uDE80 Execution"}),a.jsx("button",{onClick:()=>t("liquidation"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${"liquidation"===e?"bg-mev-primary text-white":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:"\uD83D\uDCA7 Liquidation"}),(0,a.jsxs)("button",{onClick:()=>t("system"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${"system"===e?"bg-mev-primary text-white":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:["System ",x.filter(e=>!e.acknowledged).length>0&&a.jsx("span",{className:"ml-2 px-2 py-1 bg-mev-danger text-white text-xs rounded-full",children:x.filter(e=>!e.acknowledged).length})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:F,disabled:S||!m,className:"px-3 py-2 bg-mev-warning hover:bg-yellow-600 text-white text-sm rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Restart"}),a.jsx("button",{onClick:P,disabled:S,className:"px-3 py-2 bg-mev-danger hover:bg-red-600 text-white text-sm rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Emergency Stop"})]})]})]})})}),(u||C)&&a.jsx("div",{className:"bg-red-600 text-white px-6 py-3",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Error:"})," ",u||C]})})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-6 py-6",children:["opportunities"===e&&a.jsx(g,{opportunities:n,onOpportunityClick:e=>{i(e)}}),"metrics"===e&&a.jsx(p,{metrics:c,isLoading:!1}),"execution"===e&&a.jsx(N,{executionMode:b,metrics:c,onModeChange:e=>{y&&y("execution_mode_change",{mode:e})}}),"liquidation"===e&&a.jsx(f,{}),"system"===e&&a.jsx(j,{status:o,alerts:x,onAcknowledgeAlert:v,isConnected:m})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white dark:bg-mev-dark rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Opportunity Details"}),a.jsx("button",{onClick:()=>i(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"ID"}),a.jsx("div",{className:"mt-1 font-mono text-sm",children:s.id})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Strategy"}),a.jsx("div",{className:"mt-1",children:s.strategy})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),a.jsx("div",{className:"mt-1",children:a.jsx("span",{className:`status-${s.status}`,children:s.status.toUpperCase()})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confidence"}),(0,a.jsxs)("div",{className:"mt-1",children:[(100*s.confidence).toFixed(1),"%"]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Target Transaction"}),a.jsx("div",{className:"mt-1 font-mono text-sm break-all",children:s.targetTx})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Expected Profit"}),(0,a.jsxs)("div",{className:"mt-1 text-mev-primary font-semibold",children:[parseFloat(s.expectedProfit).toFixed(6)," ETH"]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Gas Cost"}),(0,a.jsxs)("div",{className:"mt-1 text-mev-warning font-semibold",children:[(1e9*parseFloat(s.gasCost)).toFixed(2)," Gwei"]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Net Profit"}),(0,a.jsxs)("div",{className:`mt-1 font-semibold ${parseFloat(s.netProfit)>0?"text-mev-primary":"text-mev-danger"}`,children:[parseFloat(s.netProfit)>0?"+":"",parseFloat(s.netProfit).toFixed(6)," ETH"]})]})]}),s.executionTxs.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Execution Transactions (",s.executionTxs.length,")"]}),a.jsx("div",{className:"space-y-2",children:s.executionTxs.map((e,t)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded",children:[a.jsx("div",{className:"font-mono text-sm break-all",children:e.hash}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Gas: ",e.gasLimit?.toLocaleString()||"N/A"," @ ",e.gasPrice?(parseFloat(e.gasPrice)/1e9).toFixed(2):"N/A"," Gwei"]})]},t))})]})]})]})})})]})}},6996:(e,t,s)=>{"use strict";s.d(t,{h:()=>i});var a=s(7577);let r=s(4099).Z.create({baseURL:"https://mev-strategy-dev.fly.dev/api/v1",timeout:1e4}),i=()=>{let[e,t]=(0,a.useState)(!1),[s,i]=(0,a.useState)(null),l=(0,a.useCallback)(async e=>{t(!0),i(null);try{return await e()}catch(e){return i(e instanceof Error?e.message:"An error occurred"),console.error("API request failed:",e),null}finally{t(!1)}},[]),d=(0,a.useCallback)(async(e=50,t,s)=>l(async()=>{let a=new URLSearchParams;return a.append("limit",e.toString()),t&&a.append("strategy",t),s&&a.append("status",s),(await r.get(`/opportunities?${a.toString()}`)).data}),[l]),n=(0,a.useCallback)(async e=>l(async()=>(await r.get(`/opportunities/${e}`)).data),[l]),c=(0,a.useCallback)(async()=>l(async()=>(await r.get("/metrics")).data),[l]),o=(0,a.useCallback)(async()=>l(async()=>(await r.get("/status")).data),[l]),x=(0,a.useCallback)(async(e="24h")=>l(async()=>(await r.get(`/historical?period=${e}`)).data),[l]);return{loading:e,error:s,getOpportunities:d,getOpportunity:n,getMetrics:c,getSystemStatus:o,getHistoricalData:x,emergencyShutdown:(0,a.useCallback)(async(e,t=!1)=>await l(async()=>(await r.post("/shutdown",{reason:e,override:t})).data.success)||!1,[l]),restartSystem:(0,a.useCallback)(async()=>await l(async()=>(await r.post("/restart")).data.success)||!1,[l]),updateThresholds:(0,a.useCallback)(async e=>await l(async()=>(await r.post("/thresholds",e)).data.success)||!1,[l])}}},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d,metadata:()=>l});var a=s(9510),r=s(5317),i=s.n(r);s(5023);let l={title:"MEV Engine Dashboard",description:"Real-time monitoring of MEV opportunities on Base Layer 2"};function d({children:e}){return a.jsx("html",{lang:"en",className:"dark",children:a.jsx("body",{className:`${i().className} bg-mev-darker text-gray-100 min-h-screen`,children:e})})}},5480:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/Users/taylormohney/Documents/GitHub/MEVDemo/web/dashboard/src/app/page.tsx#default`)},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,347,99],()=>s(59));module.exports=a})();